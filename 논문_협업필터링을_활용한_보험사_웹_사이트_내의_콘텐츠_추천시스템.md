# 협업필터링을 활용한 보험사 웹 사이트 내의 콘텐츠 추천 시스템 제안
## 1. 서론
- 보험사 웹 사이트의 페이지 방문 이력을 활용하여 사용자에게 선호 가능성이 높은 페이지 추천 시스템 제안
- 데이터는 웹 브라우저 이용 시 발생하는 클라이언트 사이트 스토리지를 활용하여 수집
- 추천 기술: 협업 필터링(자카드 인덱스 기반의 아이템 기반 협업 필터링)

## 2. 관련 연구
### 2.1 추천시스템
#### 2.1.1 추천 기술의 종류
- 추천 시스템은 추천을 위해 검토 가능한 사용자의 디지털 흔적(digital footprint)이나 제품 관련 정보들을 모두 고려해 사용자에게만 개인화된 추천을 제공

##### 협업 필터링
- 두 명의 사용자가 과거에 비슷한 관심사를 가지고 있다면, 미래에도 비슷한 취향을 가질 것이라는 아이디어
- 유사한 사용자 또는 아이템에 대한 정보를 기반으로 한 알고리즘
- 아이템 기반 협업 필터링(IBCF)
	- 사용자가 이전에 구매한 것들과 가장 유사한 아이템을 추천
- 사용자 기반 협업 필터링(UBCF)
	- 유사한 사용자가 가장 선호하는 아이템을 사용자에게 추천
- 방문 페이지 URL을 기록하였으므로, 사용자 클릭에 따라 중복 이력이 발생할 수 있으며, 사용자가 평가를 남긴 것이 아니므로 사용자에 대한 정확한 정보가 있다고 할 수 없음 -> 아이템 기반 협업 필터링이 적합

#### 2.1.2 유사도 계산
- 협업 필터링의 기본 단계는 사용자 간 혹은 아이템 간 유사도를 계산
- 코사인 유사도
	- 가장 널리 쓰임, 값이 클수록 관련이 높음
	- UBCF의 코사인 유사도
		- 각 사용자의 평가 값을 좌표로 사용해서 원점에서 사용자까지의 선을 그었을 때, 각도가 작아질 수록 코사인 유사도 값이 1에 가깝게 되며, 반대로 코사인 유사도 값이 0이라는 것은 아무런 관련성이 없음을 의미
- 자카드 인덱스
	- 데이터가 이진 값을 가질 때
	- A와 B가 동시에 선택한 아이템 개수에서 A와 B 중 하나라도 선택된 항목의 개수로 나눈다

#### 2.1.3 성능평가
- 오분류표(Confusion Matrix): 정밀도/재현율/TPR/FPR
- 정밀도(Precision): True로 예측한 관측치 중 실제값이 True인 것의 비율을 나타내는 정확성(exactness)
- 재현율(Recall), TPR(True Positive Rate): 실제값이 True인 관측치 중 예측치가 적중한 정도를 나타내며 모형의 완전성을 평가하는 지표
- FPR: 추천 시스템이 추천했는데 사용자가 선택하지 않은 아이템의 비율
- 정밀도와 재현율은 특히 텍스트를 분류하고 정보를 검색하는 경우에 자주 사용되며, 한 지표의 값을 개선하면 다른 지표의 값은 낮아지는 관계가 나타날 가능성이 높음
- ROC 커브는 분석 결과를 가시화할 수 있다는 점에서 유용한 평가 도구
	- 그래프의 밑부분 면적 AUC(Area Under the Curve)가 넓은 면적으로 계산될수록 좋은 모형으로 평가

### 2.2 클라이언트 사이드 스토리지
- 웹사이트 운영자는 방문한 사용자의 디바이스에 소량의 정보를 기록하여 개인화된 서비스를 제공하거나 사이트 기능을 개선하기 위한 목적으로 활용
	- 쿠키
- 웹 스토리지
	- HTML5에서는 쿠키의 단점을 보완하여 웹 스토리지 기능 개발, 쿠키 사이즈 4KB보다 큰 5KB까지 저장 가능하며 HTTP 요청마다 전달하지 않음
	- 쿠키에 비해 불필요한 네트워크 트래픽이 발생하지 않는 장점
	- 로컬 스토리지
		- 사이트 재방문 시 이전에 저장되었던 정보를 이용할 수 있으므로 활용도가 높음
		- 일반적으로 쿠키라고 부름
	- 세션 스토리지
		- 세션 종료 시 데이터가 만료되는 특징
- 웹 사이트 개인정보처리방침에서는 접속 파일의 운영에 관한 정보를 이용자에게 공개하고 이용자가 웹 쿠키를 원하지 않을 경우 거절할 수 있으며 이것이 서비스에 영향을 주어서는 안된다고 명시되어 있음

## 3. 협업필터링을 이용한 웹 사이트 내의 콘텐츠 추천 모델
### 3.1 데이터 수집
- 신규 사용자가 웹 사이트 방문 시 웹 사이트 서버는 사용자 아이디를 발급
- 웹 서버와 클라이언트의 로컬 스토리지에 저장
- 사용자가 페이지를 이동하면서 변경되는 웹 페이지 정보는 웹 사이트 서버에 저장
- 웹 페이지는 URL로 구분 가능하나 분석 효율을 위해 코드 형식으로 변환하여 사용

### 3.2 데이터 전처리
- 총 7일간 수집된 웹 페이지 방문 이력 중에서 모델 적용에 적합하지 않은 사용자와 아이템을 제거하는 작업을 선행
- 사용자 아이디 중에서는 웹 페이지 2회 이하 방문한 사용자 아이디는 제외 -> 해당 데이터는 광고 배너를 실수로 클릭했거나, 사용자가 아닌 웹 크롤링에 의한 접속과 리디렉션이 발생한 경우가 다수 포함되어 있음
- 추천 아이템으로 모델에 적용할 웹 페이지 코드 중에서는 극단적으로 방문 횟수가 많은 웹 페이지와 매우 희소하게 방문된 웹 페이지는 제외 -> 극단적으로 많은 경우 콘텐츠 추천 대상으로 큰 의미 없는 메인 페이지인 경우가 대부분
- 추천 모델에 따라 바이너리 데이터에서 작동하는 경우도 있으므로 방문 여부를 의미하는 0과 1로만 이루어진 이진화 된 데이터도 만들어 연구에 활용
- 웹 사이트 이용자 동선이나 웹 사이트 리디렉션이 발생함에 따라 중복 로그가 발생할 수도 있음 -> 페이지를 몇 번 조회했는지 횟수로 계산하는 것 보다 방문을 했는지 안 했는지가 더 정확한 자료

### 3.3 모델 구현
1. UBCF, 코사인유사도, 방문횟수 데이터
2. UBCF, 자카드인덱스, 방문여부 이진화 데이터
3. IBCF, 코사인유사도, 방문횟수 데이터
4. IBCF, 자카드인덱스 방문여부 이진화 데이터
- 특정 웹 페이지 추천이 집중되었으나, IBCF 모델에서는 UBCF 모델에 비해 다양한 웹 페이지가 추천되어 있음

### 3.4 성능 평가
- 선택한 모델의 매개변수 최적화 과정을 수행
- IBCF는 가장 가까운 k개의 아이템을 고려하므로 k를 최적화하기 위해 다양한 탐색
- 매개변수 k를 5~40 범위로 탐색 -> k=40이 최적

## 4. 연구 결과 및 향후 과제
- 웹 로그를 활용한 추천 시스템 구현에서는 방문 횟수보다 방문 여부만 사용하는 것이 효과적
- 웹 사이트 방문자 간의 유사도 보다 웹 페이지 간의 유사도를 기반으로 기술을 적용하는 것이 타당함
- 추천시스템 결과를 활용하면 웹 사이트를 방문한 고객에게 추천 콘텐츠를 제시하여 연관성이 높은 다른 페이지로 이동을 유도 가능
- 정보 과잉으로 선택이 어려운 상황에서 더 좋은 선택이 가능하도록 큐레이션 정보를 제공
- 이해하기 어려운 정보가 많은 보험 웹 사이트에서는 더 자주 노출이 필요한 콘텐츠에는 가중치를 부여하여 마케팅 전략에 부합하는 아이템 추천 기술이 필요
